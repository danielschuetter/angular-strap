{"version":3,"sources":["modules/select.js"],"names":["angular","trigger","provider","container","this","defaults","keyboard","html","delay","multiple","allNoneButtons","sort","caretHtml","placeholder","allText","noneText","maxLength","maxLengthHtml","iconCheckmark","toggle","touchClickEmulationDisabled","$get","isNative","SelectFactory","$select","extend","scope","$scope","$activeIndex","config","$tooltip","element","options","$isMultiple","$showAllNoneButtons","$iconCheckmark","$allText","$activate","activate","index","$$postDigest","select","evt","$isActive","$isVisible","i","$selectNone","$matches","length","matches","$updateActiveIndex","splice","a","indexOf","push","b","$apply","controller","$setViewValue","value","map","$emit","prefixEvent","onSelect","hide","isArray","$modelValue","$getIndex","minLength","$viewValue","equals","$onMouseDown","preventDefault","stopPropagation","isTouch","anchor","anchorCandidate","targetEl","target","nodeName","parent","triggerHandler","$onKeyDown","test","keyCode","$digest","isUndefined","$selectScrollFix","$isIE","stopImmediatePropagation","focus","ua","_show","show","activeElement","tagName","e","$element","addClass","$timeout","_hide","on","off","directive","$window","document","link","require","restrict","forEach","attr","falseValueRegExp","isDefined","key","$eval","bsKey","dataMultiple","slice","inputEl","css","after","addEventListener","watchedOptions","parsedOptions","valuesFn","update","values","ngModel","$match","newValue","oldValue","$render","selected","filter","join","label","$isEmpty","$on","destroy"],"mappings":"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","file":"modules/select.min.js","sourcesContent":["'use strict';\n\nangular.module('mgcrea.ngStrap.select', ['mgcrea.ngStrap.tooltip', 'mgcrea.ngStrap.helpers.parseOptions'])\n\n  .provider('$select', function () {\n\n    var defaults = this.defaults = {\n      animation: 'am-fade',\n      prefixClass: 'select',\n      prefixEvent: '$select',\n      placement: 'bottom-left',\n      templateUrl: 'select/select.tpl.html',\n      trigger: 'focus',\n      container: false,\n      keyboard: true,\n      html: false,\n      delay: 0,\n      multiple: false,\n      allNoneButtons: false,\n      sort: true,\n      caretHtml: '&nbsp;<span class=\"caret\"></span>',\n      placeholder: 'Choose among the following...',\n      allText: 'All',\n      noneText: 'None',\n      maxLength: 3,\n      maxLengthHtml: 'selected',\n      iconCheckmark: 'glyphicon glyphicon-ok',\n      toggle: false,\n      touchClickEmulationDisabled: false\n    };\n\n    this.$get = function ($window, $document, $rootScope, $tooltip, $timeout) {\n\n      // var bodyEl = angular.element($window.document.body);\n      var isNative = /(ip[ao]d|iphone|android)/ig.test($window.navigator.userAgent);\n      var isTouch = ('createTouch' in $window.document) && isNative;\n\n      function SelectFactory (element, controller, config) {\n\n        var $select = {};\n\n        // Common vars\n        var options = angular.extend({}, defaults, config);\n\n        $select = $tooltip(element, options);\n        var scope = $select.$scope;\n\n        scope.$matches = [];\n        if (options.multiple) {\n          scope.$activeIndex = [];\n        } else {\n          scope.$activeIndex = -1;\n        }\n        scope.$isMultiple = options.multiple;\n        scope.$showAllNoneButtons = options.allNoneButtons && options.multiple;\n        scope.$iconCheckmark = options.iconCheckmark;\n        scope.$allText = options.allText;\n        scope.$noneText = options.noneText;\n\n        scope.$activate = function (index) {\n          scope.$$postDigest(function () {\n            $select.activate(index);\n          });\n        };\n\n        scope.$select = function (index, evt) {\n          scope.$$postDigest(function () {\n            $select.select(index);\n          });\n        };\n\n        scope.$isVisible = function () {\n          return $select.$isVisible();\n        };\n\n        scope.$isActive = function (index) {\n          return $select.$isActive(index);\n        };\n\n        scope.$selectAll = function () {\n          for (var i = 0; i < scope.$matches.length; i++) {\n            if (!scope.$isActive(i)) {\n              scope.$select(i);\n            }\n          }\n        };\n\n        scope.$selectNone = function () {\n          for (var i = 0; i < scope.$matches.length; i++) {\n            if (scope.$isActive(i)) {\n              scope.$select(i);\n            }\n          }\n        };\n\n        // Public methods\n\n        $select.update = function (matches) {\n          scope.$matches = matches;\n          $select.$updateActiveIndex();\n        };\n\n        $select.activate = function (index) {\n          if (options.multiple) {\n            if ($select.$isActive(index)) {\n              scope.$activeIndex.splice(scope.$activeIndex.indexOf(index), 1);\n            } else {\n              scope.$activeIndex.push(index);\n            }\n            if (options.sort) scope.$activeIndex.sort(function (a, b) { return a - b; }); // use numeric sort instead of default sort\n          } else {\n            scope.$activeIndex = index;\n          }\n          return scope.$activeIndex;\n        };\n\n        $select.select = function (index) {\n          if (angular.isUndefined(index) || index < 0 || index >= scope.$matches.length) { return; }\n          var value = scope.$matches[index].value;\n          scope.$apply(function () {\n            $select.activate(index);\n            if (options.multiple) {\n              controller.$setViewValue(scope.$activeIndex.map(function (index) {\n                if (angular.isUndefined(scope.$matches[index])) {\n                  return null;\n                }\n                return scope.$matches[index].value;\n              }));\n            } else {\n              if (options.toggle) {\n                controller.$setViewValue((value === controller.$modelValue) ? undefined : value);\n              } else {\n                controller.$setViewValue(value);\n              }\n              // Hide if single select\n              $select.hide();\n            }\n          });\n          // Emit event\n          scope.$emit(options.prefixEvent + '.select', value, index, $select);\n          if (angular.isDefined(options.onSelect) && angular.isFunction(options.onSelect)) {\n            options.onSelect(value, index, $select);\n          }\n        };\n\n        // Protected methods\n\n        $select.$updateActiveIndex = function () {\n          if (options.multiple) {\n            if (angular.isArray(controller.$modelValue)) {\n              scope.$activeIndex = controller.$modelValue.map(function (value) {\n                return $select.$getIndex(value);\n              });\n            } else {\n              scope.$activeIndex = [];\n            }\n          } else {\n            if (angular.isDefined(controller.$modelValue) && scope.$matches.length) {\n              scope.$activeIndex = $select.$getIndex(controller.$modelValue);\n            } else {\n              scope.$activeIndex = -1;\n            }\n          }\n        };\n\n        $select.$isVisible = function () {\n          if (!options.minLength || !controller) {\n            return scope.$matches.length;\n          }\n          // minLength support\n          return scope.$matches.length && controller.$viewValue.length >= options.minLength;\n        };\n\n        $select.$isActive = function (index) {\n          if (options.multiple) {\n            return scope.$activeIndex.indexOf(index) !== -1;\n          }\n          return scope.$activeIndex === index;\n        };\n\n        $select.$getIndex = function (value) {\n          var index;\n          for (index = scope.$matches.length; index--;) {\n            if (angular.equals(scope.$matches[index].value, value)) break;\n          }\n          return index;\n        };\n\n        $select.$onMouseDown = function (evt) {\n          // Prevent blur on mousedown on .dropdown-menu\n          evt.preventDefault();\n          evt.stopPropagation();\n          // Emulate click for mobile devices\n          if (isTouch && !options.touchClickEmulationDisabled) {\n            var targetEl = angular.element(evt.target);\n            var anchor;\n\n            if (evt.target.nodeName !== 'A') {\n              var anchorCandidate = targetEl.parent();\n              while (!anchor && anchorCandidate.length > 0) {\n                if (anchorCandidate[0].nodeName === 'A') {\n                  anchor = anchorCandidate;\n                }\n                anchorCandidate = anchorCandidate.parent();\n              }\n            }\n\n            if (anchor) {\n              angular.element(anchor).triggerHandler('click');\n            } else {\n              targetEl.triggerHandler('click');\n            }\n          }\n        };\n\n        $select.$onKeyDown = function (evt) {\n          if (!/(9|13|38|40)/.test(evt.keyCode)) return;\n          // Let tab propagate\n          if (evt.keyCode !== 9) {\n            evt.preventDefault();\n            evt.stopPropagation();\n          }\n\n          // release focus on tab\n          if (options.multiple && evt.keyCode === 9) {\n            return $select.hide();\n          }\n\n          // Select with enter\n          if (!options.multiple && (evt.keyCode === 13 || evt.keyCode === 9)) {\n            return $select.select(scope.$activeIndex);\n          }\n\n          if (!options.multiple) {\n            // Navigate with keyboard\n            if (evt.keyCode === 38 && scope.$activeIndex > 0) scope.$activeIndex--;\n            else if (evt.keyCode === 38 && scope.$activeIndex < 0) scope.$activeIndex = scope.$matches.length - 1;\n            else if (evt.keyCode === 40 && scope.$activeIndex < scope.$matches.length - 1) scope.$activeIndex++;\n            else if (angular.isUndefined(scope.$activeIndex)) scope.$activeIndex = 0;\n            scope.$digest();\n          }\n        };\n\n        $select.$isIE = function () {\n          var ua = $window.navigator.userAgent;\n          return ua.indexOf('MSIE ') > 0 || ua.indexOf('Trident/') > 0 || ua.indexOf('Edge/') > 0;\n        };\n\n        $select.$selectScrollFix = function (e) {\n          if ($document[0].activeElement.tagName === 'UL') {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            e.target.focus();\n          }\n        };\n\n        // Overrides\n\n        var _show = $select.show;\n        $select.show = function () {\n          _show();\n          if (options.multiple) {\n            $select.$element.addClass('select-multiple');\n          }\n          // use timeout to hookup the events to prevent\n          // event bubbling from being processed imediately.\n          $timeout(function () {\n            $select.$element.on(isTouch ? 'touchstart' : 'mousedown', $select.$onMouseDown);\n            if (options.keyboard) {\n              element.on('keydown', $select.$onKeyDown);\n            }\n          }, 0, false);\n        };\n\n        var _hide = $select.hide;\n        $select.hide = function () {\n          if (!options.multiple && angular.isUndefined(controller.$modelValue)) {\n            scope.$activeIndex = -1;\n          }\n          $select.$element.off(isTouch ? 'touchstart' : 'mousedown', $select.$onMouseDown);\n          if (options.keyboard) {\n            element.off('keydown', $select.$onKeyDown);\n          }\n          _hide(true);\n        };\n\n        return $select;\n\n      }\n\n      SelectFactory.defaults = defaults;\n      return SelectFactory;\n\n    };\n\n  })\n\n  .directive('bsSelect', function ($window, $parse, $q, $select, $parseOptions) {\n\n    var defaults = $select.defaults;\n\n    return {\n      restrict: 'EAC',\n      require: 'ngModel',\n      link: function postLink (scope, element, attr, controller) {\n\n        // Directive options\n        var options = {scope: scope, placeholder: defaults.placeholder};\n        angular.forEach(['template', 'templateUrl', 'controller', 'controllerAs', 'placement', 'container', 'delay', 'trigger', 'keyboard', 'html', 'animation', 'placeholder', 'allNoneButtons', 'maxLength', 'maxLengthHtml', 'allText', 'noneText', 'iconCheckmark', 'autoClose', 'id', 'sort', 'caretHtml', 'prefixClass', 'prefixEvent', 'toggle', 'touchClickEmulationDisabled'], function (key) {\n          if (angular.isDefined(attr[key])) options[key] = attr[key];\n        });\n\n        // use string regex match boolean attr falsy values, leave truthy values be\n        var falseValueRegExp = /^(false|0|)$/i;\n        angular.forEach(['html', 'container', 'allNoneButtons', 'sort', 'touchClickEmulationDisabled'], function (key) {\n          if (angular.isDefined(attr[key]) && falseValueRegExp.test(attr[key])) {\n            options[key] = false;\n          }\n        });\n\n        // bind functions from the attrs to the show, hide and select events\n        angular.forEach(['onBeforeShow', 'onShow', 'onBeforeHide', 'onHide', 'onSelect'], function (key) {\n          var bsKey = 'bs' + key.charAt(0).toUpperCase() + key.slice(1);\n          if (angular.isDefined(attr[bsKey])) {\n            options[key] = scope.$eval(attr[bsKey]);\n          }\n        });\n\n        // Only parse data-multiple. Angular sets existence attributes to true (multiple/required/etc), they apply this\n        // to data-multiple as well for some reason, so we'll parse this ourselves and disregard multiple\n        var dataMultiple = element.attr('data-multiple');\n        if (angular.isDefined(dataMultiple)) {\n          if (falseValueRegExp.test(dataMultiple)) {\n            options.multiple = false;\n          } else {\n            options.multiple = dataMultiple;\n          }\n        }\n\n        // Add support for select markup\n        if (element[0].nodeName.toLowerCase() === 'select') {\n          var inputEl = element;\n          inputEl.css('display', 'none');\n          element = angular.element('<button type=\"button\" class=\"btn btn-default\" aria-haspopup=\"true\"></button>');\n          inputEl.after(element);\n        }\n\n        // Build proper bsOptions\n        var parsedOptions = $parseOptions(attr.bsOptions);\n\n        // Initialize select\n        var select = $select(element, controller, options);\n\n        if (select.$isIE()) {\n          element[0].addEventListener('blur', select.$selectScrollFix);\n        }\n\n        // Watch bsOptions values before filtering for changes\n        var watchedOptions = parsedOptions.$match[7].replace(/\\|.+/, '').trim();\n        scope.$watch(watchedOptions, function (newValue, oldValue) {\n          // console.warn('scope.$watch(%s)', watchedOptions, newValue, oldValue);\n          parsedOptions.valuesFn(scope, controller)\n          .then(function (values) {\n            select.update(values);\n            controller.$render();\n          });\n        }, true);\n\n        // Watch model for changes\n        scope.$watch(attr.ngModel, function (newValue, oldValue) {\n          // console.warn('scope.$watch(%s)', attr.ngModel, newValue, oldValue);\n          select.$updateActiveIndex();\n          controller.$render();\n        }, true);\n\n        // Model rendering in view\n        controller.$render = function () {\n          // console.warn('$render', element.attr('ng-model'), 'controller.$modelValue', typeof controller.$modelValue, controller.$modelValue, 'controller.$viewValue', typeof controller.$viewValue, controller.$viewValue);\n          var selected;\n          var index;\n          if (options.multiple && angular.isArray(controller.$modelValue)) {\n            selected = controller.$modelValue.map(function (value) {\n              index = select.$getIndex(value);\n              return index !== -1 ? select.$scope.$matches[index].label : false;\n            }).filter(angular.isDefined);\n            if (selected.length > (options.maxLength || defaults.maxLength)) {\n              selected = selected.length + ' ' + (options.maxLengthHtml || defaults.maxLengthHtml);\n            } else {\n              selected = selected.join(', ');\n            }\n          } else {\n            index = select.$getIndex(controller.$modelValue);\n            selected = index !== -1 ? select.$scope.$matches[index].label : false;\n          }\n          element.html((selected || options.placeholder) + (options.caretHtml || defaults.caretHtml));\n        };\n\n        if (options.multiple) {\n          controller.$isEmpty = function (value) {\n            return !value || value.length === 0;\n          };\n        }\n\n        // Garbage collection\n        scope.$on('$destroy', function () {\n          if (select) select.destroy();\n          options = null;\n          select = null;\n        });\n\n      }\n    };\n\n  });\n"],"sourceRoot":"/source/"}